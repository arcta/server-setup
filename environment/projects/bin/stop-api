#!/bin/bash

########################################################################
### stop project python-api if exist
### parameters: $1 project subdirectory
########################################################################
source ~/.local.cnf

if [ -d "$HOME/projects/$1" ]; then

    if [ -f "/etc/nginx/location/api-$1" ]; then
        sudo rm /etc/nginx/location/api-$1
        sudo rm /etc/uwsgi/vassals/$1.ini
        sudo systemctl daemon-reload
    fi

    sudo systemctl restart nginx
    echo "Stopped $1 Python-API."
else
    echo "Aborting: location projects/$1 does not exist"
fi
